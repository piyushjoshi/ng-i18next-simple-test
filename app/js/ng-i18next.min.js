/*! ng-i18next - 0.3.3 - 2014-07-30 - Copyright (c) 2014 Andre Meyering; Licensed MIT*/angular.module("jm.i18next",["ng"]),angular.module("jm.i18next").provider("$i18next",function(){"use strict";var n=this,t=null,e={},i=null,o=0;n.options={},n.$get=["$rootScope","$timeout",function(u,r){function a(n){if(window.i18n)window.i18n.init(n,function(n){e={},t=n,u.$$phase||u.$digest(),u.$broadcast("i18nextLanguageChange",window.i18n.lng())});else{if(o++,!(5>o))throw new Error("[ng-i18next] Can't find i18next!");r(function(){a(n)},400)}}function l(n,t){f.debugMsg.push(["i18next options changed:",t,n]),i=n,a(i)}function s(n,o,u){var r=o.lng||"auto";e[r]||(e[r]={}),t?(!e[r][n]||u)&&(e[r][n]=t(n,o)):e[r][n]="defaultLoadingValue"in o?o.defaultLoadingValue:"defaultValue"in o?o.defaultValue:"defaultLoadingValue"in i?i.defaultLoadingValue:n}function f(n,t){var i=t||{},o=t?angular.extend({},i,t):i;return s(n,o,!!t),t&&t.lng?e[t.lng][n]:i.lng?e[i.lng][n]:e.auto[n]}return f.debugMsg=[],f.options=n.options,n.options!==i&&l(n.options,i),f.reInit=function(){l(i,i)},u.$watch(function(){return f.options},function(n,t){n&&t!==n&&l(n,t)},!0),f}]}),angular.module("jm.i18next").directive("ngI18next",["$rootScope","$i18next","$compile","$parse","$interpolate",function(n,t,e,i,o){"use strict";function u(u,r,l){var s,f,g="text",d=[g];if(a&&a(),l=l.trim(),0===l.indexOf("[")){var c=l.split("]");if(c.length>2)for(f=2;f<c.length;f++)c[1]+="]"+c[f],c[f]=null;l=c[1],g=c[0].substr(1,c[0].length-1)}if(l.indexOf(";")===l.length-1&&(l=l.substr(0,l.length-2).trim()),g.indexOf(":")>=0?(d=g.split(":"),g=d[0]):"i18next"===g&&(d[1]="i18next",g="text"),"i18next"!==g&&"i18next"!==d[1])s=t(l);else{var p={},x=l;if(l.indexOf("(")>=0&&l.indexOf(")")>=0){var $=l.split(")");$[0]=$[0].substr(1,$[0].length),$.length>2?(x=$.pop(),p=i($.join(")"))(u)):(p=i($[0])(u),x=$[1].trim()),p.sprintf&&(p.postProcess="sprintf")}s=t(x,p)}if("html"===g)r.empty().append(s),e(r.contents())(u);else{var h=r.text.bind(r);"text"!==g&&(h=r.attr.bind(r,g)),a=u.$watch(o(s),h),h(s)}n.$$phase||n.$digest()}function r(n,t,e){if(e.indexOf(";")>=0)for(var i=e.split(";"),o=0;o<i.length;o++)""!==i[o]&&u(n,t,i[o]);else u(n,t,e)}var a;return{restrict:"A",scope:!1,link:function(n,t,e){function i(e){return a=e.replace(/^\s+|\s+$/g,""),""===a?u():void r(n,t,a)}function u(){if(!u.done){var e=o(t.html());n.$watch(e,i),u.done=!0}}var a;e.$observe("ngI18next",i),n.$on("i18nextLanguageChange",function(){r(n,t,a)})}}}]),angular.module("jm.i18next").filter("i18next",["$i18next",function(n){"use strict";return function(t,e){return n(t,e)}}]);